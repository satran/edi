<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
        <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
        <title>Dabba | Open</title>
        <link rel="stylesheet" href="/s/app.css"/>
    </head>
    <body>
        <div class="container">
            <div id="header">
	              <div>
	                  <a class="item" href="/">
	                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box" viewBox="0 0 16 16">
	                          <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5 8 5.961 14.154 3.5 8.186 1.113zM15 4.239l-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
	                      </svg>
	                  </a>
	                  <a class="item right" href="/_new">
	                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
	                          <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z"/>
	                      </svg>
	                  </a>
	                  <a class="item right" href="/_open">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-folder2-open" viewBox="0 0 16 16">
                            <path d="M1 3.5A1.5 1.5 0 0 1 2.5 2h2.764c.958 0 1.76.56 2.311 1.184C7.985 3.648 8.48 4 9 4h4.5A1.5 1.5 0 0 1 15 5.5v.64c.57.265.94.876.856 1.546l-.64 5.124A2.5 2.5 0 0 1 12.733 15H3.266a2.5 2.5 0 0 1-2.481-2.19l-.64-5.124A1.5 1.5 0 0 1 1 6.14V3.5zM2 6h12v-.5a.5.5 0 0 0-.5-.5H9c-.964 0-1.71-.629-2.174-1.154C6.374 3.334 5.82 3 5.264 3H2.5a.5.5 0 0 0-.5.5V6zm-.367 1a.5.5 0 0 0-.496.562l.64 5.124A1.5 1.5 0 0 0 3.266 14h9.468a1.5 1.5 0 0 0 1.489-1.314l.64-5.124A.5.5 0 0 0 14.367 7H1.633z"/>
                        </svg>
                    </a>
	              </div>
            </div>
            <div id="files">
	              <input autofocus id="prompt" autocomplete="off"autocapitalize="off" type="text" placeholder="type filename here..." \>
	              <div id="file-list"></div>
            </div>
        </div>
        <script type="text/javascript" src="/s/fuzzysort.js"></script>
        <script type="text/javascript">
         var files = {{.Files}};
         (function(){
             function showResults(val) {
                 res = document.getElementById("file-list");
                 res.innerHTML = '';
                 let list = '';
                 // From https://github.com/farzher/fuzzysort
                 let terms = fuzzysort.go(val, files)
                 for (i=0; i<terms.length; i++) {
                     file = terms[i].target;
                     list += '<a href="' + file + '">' + file + '</a>';
                 }
                 res.innerHTML = list;
             }

             const prompt = document.querySelector("#prompt");
             prompt.addEventListener("keydown", function (event) {
                 showResults(prompt.value);
             });
         })();
        </script>
    </body>
</html>
